import{G as h,$ as n,I as u,T as s,g as a,s as c,J as f,P as p,R as k,Q as m,N as d}from"./DarkTheme-gFe2bpMP.js";import{C as g}from"./main-DZWrXasQ.js";import{i as w}from"./connection-ByZId8Xf.js";const i={};i.initialize=function(e){h.active_tab!=="options"&&(h.active_tab="options"),n("#content").load("./tabs/options.html",function(){u.localizePage(),s.options.initRememberLastTab(),s.options.initAnalyticsOptOut(),s.options.initCliAutoComplete(),s.options.initShowAllSerialDevices(),s.options.initShowVirtualMode(),s.options.initUseManualConnection(),s.options.initLegacyRendering3DModel(),s.options.initDarkTheme(),s.options.initShowDevToolsOnStartup(),s.options.initShowNotifications(),s.options.initUserLanguage(),s.options.initShowWarnings(),s.options.initMeteredConnection(),s.options.initBackupOnFlash(),h.content_ready(e)})};i.cleanup=function(e){e&&e()};i.initShowWarnings=function(){a("showPresetsWarningBackup").showPresetsWarningBackup&&n("div.presetsWarningBackup input").prop("checked",!0),n("div.presetsWarningBackup input").change(function(){const t=n(this).is(":checked");c({showPresetsWarningBackup:t})}).change()};i.initRememberLastTab=function(){const e=a("rememberLastTab");n("div.rememberLastTab input").prop("checked",!!e.rememberLastTab).change(function(){c({rememberLastTab:n(this).is(":checked")})}).change()};i.initAnalyticsOptOut=function(){a("analyticsOptOut").analyticsOptOut&&n("div.analyticsOptOut input").prop("checked",!0),n("div.analyticsOptOut input").change(function(){const t=n(this).is(":checked");c({analyticsOptOut:t}),f(function(o){t&&o.sendEvent(o.EVENT_CATEGORIES.APPLICATION,"OptOut"),o.setOptOut(t),t||o.sendEvent(o.EVENT_CATEGORIES.APPLICATION,"OptIn")})}).change()};i.initCliAutoComplete=function(){n("div.cliAutoComplete input").prop("checked",g.configEnabled).change(function(){const e=n(this).is(":checked");c({cliAutoComplete:e}),g.setEnabled(e)}).change()};i.initAutoConnectConnectionTimeout=function(){const e=a("connectionTimeout");e.connectionTimeout&&n("#connectionTimeoutSelect").val(e.connectionTimeout),n("#connectionTimeoutSelect").on("change",function(){const t=parseInt(n(this).val());c({connectionTimeout:t})})};i.initShowAllSerialDevices=function(){const e=n("div.showAllSerialDevices input"),t=a("showAllSerialDevices");e.prop("checked",!!t.showAllSerialDevices).on("change",()=>{const o=e.is(":checked");c({showAllSerialDevices:o}),p.setShowAllSerialDevices(o)})};i.initShowVirtualMode=function(){const e=n("div.showVirtualMode input"),t=a("showVirtualMode");e.prop("checked",!!t.showVirtualMode).on("change",()=>{const o=e.is(":checked");c({showVirtualMode:o}),p.setShowVirtualMode(o)})};i.initUseManualConnection=function(){const e=n("div.showManualMode input"),t=a("showManualMode");e.prop("checked",!!t.showManualMode).on("change",()=>{const o=e.is(":checked");c({showManualMode:o}),p.setShowManualMode(o)})};i.initLegacyRendering3DModel=function(){const e=n("div.useLegacyRenderingModel input"),t=a("useLegacyRenderingModel");e.prop("checked",!!t.useLegacyRenderingModel).on("change",()=>{const o=e.is(":checked");c({useLegacyRenderingModel:o})})};i.initDarkTheme=function(){n("#darkThemeSelect").val(k.configSetting).change(function(){const e=parseInt(n(this).val());c({darkTheme:e}),m(e)}).change()};i.initShowDevToolsOnStartup=function(){const e=a("showDevToolsOnStartup");n("div.showDevToolsOnStartup input").prop("checked",!!e.showDevToolsOnStartup).change(function(){c({showDevToolsOnStartup:n(this).is(":checked")})}).change()};i.initShowNotifications=function(){const e=a("showNotifications");n("div.showNotifications input").prop("checked",!!e.showNotifications).on("change",function(){const t=n(this),o=t.is(":checked");if(o){const l={title:u.getMessage("notificationsDeniedTitle"),text:u.getMessage("notificationsDenied"),buttonConfirmText:u.getMessage("OK")};switch(d.checkPermission()){case"granted":c({showNotifications:o});break;case"denied":h.showInformationDialog(l),t.prop("checked",!1);break;case"default":t.prop("checked",!1),d.requestPermission().then(r=>{r==="granted"?(c({showNotifications:o}),t.prop("checked",!0).trigger("change")):h.showInformationDialog(l)})}}c({showNotifications:t.is(":checked")})}).change()};i.initMeteredConnection=function(){const e=a("meteredConnection");n("div.meteredConnection input").prop("checked",!!e.meteredConnection).on("change",function(){c({meteredConnection:n(this).is(":checked")}),w()}).trigger("change")};i.initBackupOnFlash=function(){const e=a("backupOnFlash",1);n("#backupOnFlashSelect").val(e.backupOnFlash),n("#backupOnFlashSelect").on("change",function(){const t=parseInt(n(this).val());c({backupOnFlash:t})}).trigger("change")};i.initUserLanguage=function(){const e=u.selectedLanguage,t=n("#userLanguage"),o=u.getLanguagesAvailables();t.append(`<option value="DEFAULT">${u.getMessage("language_default")}</option>`),t.append("<option disabled>------</option>"),o.forEach(l=>{const r=u.getMessage(`language_${l}`);t.append(`<option value="${l}">${r}</option>`)}),t.val(e).on("change",l=>{u.changeLanguage(l.target.value),u.localizePage()}).trigger("change")};s.options=i;export{i as options};
