import{$ as e,S as A,U as N,R as b}from"./DarkTheme-gFe2bpMP.js";const r=opener.i18n,o=1e3,u=1500,m=2e3,E={Roll:0,Pitch:1,Throttle:2,Yaw:3,Aux1:4,Aux2:5,Aux3:6,Aux4:7},a={Throttle:o,Pitch:u,Roll:u,Yaw:u,Aux1:o,Aux2:o,Aux3:o,Aux4:o},s=[["Throttle","Yaw"],["Pitch","Roll"]];let c,d,k=!1;const I={darkTheme:t=>{t?b.applyDark():b.applyNormal()}};function T(){const t=[0,0,0,0,0,0,0,0];if(k){for(const n in a)t[E[n]]=a[n];window.setRawRx(t)||(A()?close():chrome.app.window.current().close())}}function p(t){return t=Math.min(Math.max(t,0),1),Math.round(t*(m-o)+o)}function w(t){return(t-o)/(m-o)}function M(){for(const t in a){const n=a[t];for(const l in s){const i=s[l],g=c.get(l),f=e(g).width(),x=e(".control-stick",g);if(i[0]===t){x.css("top",`${(1-w(n))*f}px`);break}else if(i[1]===t){x.css("left",`${w(n)*f}px`);break}}}}function h(t){const n=e(c.get(t.data.gimbalIndex)),l=n.offset(),i=n.width();a[s[t.data.gimbalIndex][0]]=p(1-(t.pageY-l.top)/i),a[s[t.data.gimbalIndex][1]]=p((t.pageX-l.left)/i),M()}function V(){e("[i18n]:not(.i18n-replaced)").each(function(){const t=e(this);t.html(r.getMessage(t.attr("i18n"))),t.addClass("i18n-replaced")})}function P(){for(const t in s){const n=c.get(t);e(".gimbal-label-vert",n).text(r.getMessage(`controlAxis${s[t][0]}`)),e(".gimbal-label-horz",n).text(r.getMessage(`controlAxis${s[t][1]}`))}for(let t=0;t<4;t++)e(".slider-label",d.get(t)).text(r.getMessage(`controlAxisAux${t+1}`))}e(".button-enable .btn").on("click",function(){const t=e(".warning").height();e(".warning").slideUp("short",function(){A()?resizeTo(outerWidth,outerHeight-t):(chrome.app.window.current().innerBounds.minHeight-=t,chrome.app.window.current().innerBounds.height-=t,chrome.app.window.current().innerBounds.maxHeight-=t)}),k=!0});c=e(".control-gimbal");d=e(".control-slider");c.each(function(t){e(this).on("mousedown",{gimbalIndex:t},function(n){n.button===0&&(h(n),e(window).on("mousemove",{gimbalIndex:t},h))})});e(".slider",d).each(function(t){const n=a[`Aux${t+1}`];e(this).noUiSlider({start:n,range:{min:o,max:m}}).on("slide change set",function(l,i){i=Math.round(parseFloat(i)),a[`Aux${t+1}`]=i,e(".tooltip",this).text(i)}),e(this).append('<div class="tooltip"></div>'),e(".tooltip",this).text(n)});e(window).on("mouseup",function(t){e(this).off("mousemove",h)});N.bindWatchers(window,I);V();P();M();setInterval(T,50);
