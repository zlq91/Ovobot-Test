import{G as D,F as n,T as f,$ as t,M as S,X as h,I as l,L as y,a3 as O}from"./DarkTheme-BPZSaX8v.js";const T={available:!1};T.initialize=function(u){let F={},r={NONE:0,TEXT:1,LIST:2},_={0:{dataType:r.NONE},1:{dataType:r.TEXT},2:{dataType:r.LIST,dataOptions:{"ID 1":"E00370FC0FFE07E0FF","ID 2":"007C003EF800FC0FFE","ID 3":"F8811FF8811FFFC7FF","ID 4":"007C003EF81F800FFE","ID 5":"F00FFF00FFF00FF0FF","ID 6":"007CF0C1071F7C00F0","ID 7":"E003F03F00FF03F0C1","ID 8":"00FC0FFE071F3E00FE","ID 9":"E083BFF00F9E38C0FF"}},3:{dataType:r.LIST,dataOptions:{0:"00",1:"01",2:"02",3:"03",4:"04",5:"05",6:"06",7:"07",8:"08",9:"09",10:"0A",11:"0B",12:"0C",13:"0D",14:"0E",15:"0F",16:"10",17:"11",18:"12",19:"13",20:"14",21:"15",22:"16",23:"17",24:"18",25:"19",26:"1A",27:"1B",28:"1C",29:"1D",30:"1E",31:"1F",32:"20",33:"21",34:"22",35:"23",36:"24",37:"25",38:"26",39:"27",40:"28",41:"29",42:"2A",43:"2B",44:"2C",45:"2D",46:"2E",47:"2F",48:"30",49:"31",50:"32",51:"33",52:"34",53:"35",54:"36",55:"37",56:"38",57:"39",58:"3A",59:"3B",60:"3C",61:"3D",62:"3E",63:"3F"}}};if(D.active_tab="transponder",n.CONFIG&&(f.transponder.available=!0),!f.transponder.available){N();return}function N(){t("#content").load("./tabs/transponder.html",m)}function v(e){const a=[];for(let o=0;o<e.length;o+=2)a.push(~parseInt(e.substr(o,2),16));return a}function C(e,a){return e=`${e}`,e.length>=a?e:new Array(a-e.length+1).join("0")+e}function c(e){const a=[];for(let o=0;o<e.length;o++)a.push(C((~e[o]&255).toString(16),2));return a.join("").toUpperCase()}function A(e,a,o){let i=t("#transponder_type_select");i.attr("data-defaultValue",a),i.off("change").change(o),i.html(""),e.length>1&&i.append(t("<option>").attr("value",0).html(l.getMessage("transponderType0")));for(let d in e){let s=e[d];s.hasOwnProperty("id")&&i.append(t("<option>").attr("value",s.id).html(l.getMessage(`transponderType${s.id}`)))}i.val(a)}function E(e,a,o){if(t("#transponderConfiguration").html(""),t("#transponderConfiguration").hide(),t("#transponderHelpBox").hide(),!e)return;let i=t("#transponder-configuration-template").clone();i.find(".spacer_box_title").html(l.getMessage(`transponderData${e.id}`)),i.find(".dataHelp").html(l.getMessage(`transponderDataHelp${e.id}`)),l.getMessage(`transponderHelp${e.id}`).length&&(t("#transponderHelp").html(l.getMessage(`transponderHelp${e.id}`)),t("#transponderHelpBox").show());let d=_[e.id],s=null;switch(d.dataType){case r.TEXT:s=t("<input>").attr("type","text").attr("maxlength",parseInt(e.dataLength)*2),o?s.val(F[e.id]||""):s.val(a);break;case r.LIST:s=t("<select>");for(let p in d.dataOptions){let g=d.dataOptions[p];s.append(t("<option>").val(g).html(p))}s.find(`option[value='${a}']`).length>0&&!o?s.val(a):s.val(F[e.id]||"");break;default:return}o||(F[e.id]=a);let R=function(){let p=t(this).val(),g=new RegExp(`[0-9a-fA-F]{${e.dataLength*2}}`,"gi");p.match(g)?n.TRANSPONDER.data=v(p):n.TRANSPONDER.data=[],F[e.id]=p};s.change(R).keyup(R),i.find(".input_block").html(s),t("#transponder-configuration").html(i.show())}function I(){n.TRANSPONDER.provider=t(this).val(),t(this).attr("data-defaultValue")==t(this).val()?(t(".save_reboot").hide(),t(".save_no_reboot").show()):(t(".save_no_reboot").hide(),t(".save_reboot").show()),E(n.TRANSPONDER.providers.find(function(o){return o.id==n.TRANSPONDER.provider}),c(n.TRANSPONDER.data),!0)}S.send_message(h.MSP_TRANSPONDER_CONFIG,!1,!1,N);function m(){t(".tab-transponder").toggleClass("transponder-supported",f.transponder.available&&n.TRANSPONDER.supported),l.localizePage(),f.transponder.available&&n.TRANSPONDER.providers.length>0&&(A(n.TRANSPONDER.providers,n.TRANSPONDER.provider,I),E(n.TRANSPONDER.providers.find(function(e){return e.id==n.TRANSPONDER.provider}),c(n.TRANSPONDER.data)),t("a.save").click(function(){let e=this;function a(){S.send_message(h.MSP_SET_TRANSPONDER_CONFIG,O.crunch(h.MSP_SET_TRANSPONDER_CONFIG),!1,o)}function o(){O.writeConfiguration(t(e).hasClass("reboot"))}n.TRANSPONDER.provider!=="0"&&n.TRANSPONDER.data.length!==n.TRANSPONDER.providers.find(function(i){return i.id==n.TRANSPONDER.provider}).dataLength?y(l.getMessage("transponderDataInvalid")):a()})),D.content_ready(u)}};T.cleanup=function(u){u&&u()};f.transponder=T;export{T as transponder};
